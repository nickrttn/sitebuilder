function Site(a){this.name=a,this.content="",this.snippets={header1:"snippets/header1.html",header2:"snippets/header2.html",header3:"snippets/header3.html",main1:"snippets/main1.html",main2:"snippets/main2.html",main3:"snippets/main3.html",footer1:"snippets/footer1.html",footer2:"snippets/footer2.html"},this.changeTitle=function(){title.textContent=this.name},this.addStylesheet=function(){var a=new DOMParser;doc=a.parseFromString(this.content,"text/html");var b=doc.querySelector("head").innerHTML;b+='	<link type="text/css" rel="stylesheet" href="snippets/css/foundation.css">',doc.querySelector("head").innerHTML=b,this.content=doc.documentElement.innerHTML},this.openToSave=function(){{var a=window.open();a.document}a.document.open(),a.document.write(this.content),a.document.close()},this.addCode=function(){code.textContent=this.content,Prism.highlightElement(code)},this.loadContent=function(a,b,c){b.length>0?$.get(b,function(){console.log("GET "+b)}).done(function(b){c(a,b)}):builder.innerHTML=this.content},this.addContent=function(a,b){b&&(a.content+=b,builder.innerHTML=a.content,a.addCode(),a.reflowPage())},this.reflowPage=function(){$(document).foundation()}}$(document).foundation();var mySite,siteIsCreated=!1,newButton=document.querySelector('#newModal input[type="submit"'),saveButton=document.querySelector(".save"),title=document.querySelector(".name > h1 > a"),builder=document.querySelector(".builder"),code=document.querySelector("code"),sidebar=document.querySelector(".sidebar");newButton.addEventListener("click",function(a){a.preventDefault();var b=document.querySelector('[name="sitename"]').value;mySite=new Site(b),mySite.addContent(null),mySite.changeTitle(),siteIsCreated=mySite instanceof Site,console.log(siteIsCreated),$("#newModal").foundation("reveal","close")}),saveButton.addEventListener("click",function(a){a.preventDefault(),siteIsCreated&&(mySite.addStylesheet(),mySite.openToSave())}),sidebar.addEventListener("click",function(a){var b=a.target.parentNode,c=b.classList[0],d=a.target.parentNode.nodeName;if(siteIsCreated&&"ARTICLE"===d)mySite.loadContent(mySite,mySite.snippets[c],mySite.addContent);else{if(siteIsCreated&&"ARTICLE"!==d)return;siteIsCreated||$("#createFirst").foundation("reveal","open")}});